load_all()
library(devtools)
load_all()
library(baseImportance)
importance_frame
library(baseImportance)
library(baseImportance)
library(roxygen2)
library(baseImportance)
library(baseImportance)
decreasing_importance()
library(baseImportance)
library(baseImportance)
df2
c(1.00000000, 0.61538462, 0.00000000, 0.06538462, 0.9020979, 1.0000000, 0.7874126, 0.0000000) * 0.8
c(1.00000000, 0.61538462, 0.00000000, 0.06538462, 0.9020979, 1.0000000, 0.7874126, 0.0000000) * 0.8 + c(0.9219858, 0.2978723, 1.0000000, 0.0000000, 0.9661017, 0.5254237, 1.0000000, 0.0000000) * 0.2)
c(1.00000000, 0.61538462, 0.00000000, 0.06538462, 0.9020979, 1.0000000, 0.7874126, 0.0000000) * 0.8 + c(0.9219858, 0.2978723, 1.0000000, 0.0000000, 0.9661017, 0.5254237, 1.0000000, 0.0000000) * 0.2
c(0.9843972, 0.5518822, 0.2000000, 0.0523077, 0.9148987, 0.9050847, 0.8299301, 0.0000000)/2
c(c(0.9843972, 0.5518822, 0.2000000, 0.0523077, 0.9148987, 0.9050847, 0.8299301, 0.0000000)/2 )
library(baseImportance)
getwd()
df3 = read_excel("/tests/testthat/data/df3.xlsx")
library(read\)
library(readxl)
df3 = read_excel("/tests/testthat/data/df3.xlsx")
df3 = read_excel("./tests/testthat/data/df3.xlsx")
df3
weights = c(0.8, 0.2)
importance_frame = df3
library(baseImportance)
expect_equal(baseImpact(df3,weights = c(0.8, 0.2))$impact %>% round(7),
c(0.9843972, 0.5518822, 0.2000000, 0.0523077, 0.9148987, 0.9050847, 0.8299301, 0.0000000))
df
df3
baseImpact(df3)
baseImpact(./tests/testthat/data/df3.xlsx)
baseImpact("./tests/testthat/data/df3.xlsx")
c(0.96099291 * 0.8 + 0.93409980 * 0.2, 0.45662848 * 0.8 + 0.76271186 * 0.2, 0.50000000 * 0.8 + 0.89370629 * 0.2 + 0.03269231 * 0.8)
library(baseImportance)
c(0.96099291 * 0.8 + 0.93409980 * 0.2, 0.45662848 * 0.8 + 0.76271186 * 0.2, 0.50000000 * 0.8 + 0.89370629 * 0.2, 0.03269231 * 0.8)
baseImpact_combined <- function(paths, model_ids, ensamble_model_id, weights_metrics = NULL, weights_models = NULL, divide_by_number = FALSE){
data = list()
for(i in 1:length(paths)){
data[[i]] = calculate_base_variables_importance(importance_frame = read_excel(paths[i]), weights = weights_metrics, divide_by_number = divide_by_number)
}
data <- do.call(rbind.data.frame, data)
return(calculate_combined_model(importance_frame = data, model_ids = model_ids, ensamble_model_id = ensamble_model_id, weights = weights_models))
}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
library(data.table)
library(readxl)
temp_0_5 = baseImportance::baseImpact_combined(paths, c(102,103), 104, weights_models = c(0.5,0.5))
paths = c("C:/Users/mjalocha/Desktop/ranking/model_101_ranking.xlsx", "C:/Users/mjalocha/Desktop/ranking/model_rest_ranking.xlsx")
temp_0_5 = baseImportance::baseImpact_combined(paths, c(102,103), 104, weights_models = c(0.5,0.5))
temp_0_8 = baseImportance::baseImpact_combined(paths, c(102,103), 104, weights_models = c(0.8,0.2))
temp_0_9 = baseImportance::baseImpact_combined(paths, c(102,103), 104, weights_models = c(0.9,0.1))
temp_0_5
temp = cbind(temp_0_5 %>% select(variable, impact), temp_0_8$impact, temp_0_9$impact)
library(dlpyr)
library(dplyr)
temp = cbind(temp_0_5 %>% select(variable, impact), temp_0_8$impact, temp_0_9$impact)
temp
